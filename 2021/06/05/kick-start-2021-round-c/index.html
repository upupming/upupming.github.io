<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Google Kickstart 2021 Round C 题解"><meta name="keywords" content="algorithm"><meta name="author" content="upupming"><meta name="copyright" content="upupming"><title>Google Kickstart 2021 Round C 题解 | upupming 的博客</title><link rel="shortcut icon" href="/my-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#1B9EF3"><meta name="msapplication-TileColor" content="#1B9EF3"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#1B9EF3"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-2188191456032650',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?295ad5c5a196e4964e20f74260711177";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-114899088-1', 'auto');
ga('send', 'pageview');</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"5WEDOKLFCL","apiKey":"26a57bfa5275b7c98a3b3ab7dae61915","indexName":"upupming-blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#a-smaller-strings"><span class="toc-number">1.</span> <span class="toc-text"> A. Smaller Strings</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#算法-按位枚举"><span class="toc-number">1.1.</span> <span class="toc-text"> 算法 —— 按位枚举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-代码"><span class="toc-number">1.2.</span> <span class="toc-text"> C++ 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#b-alien-generator"><span class="toc-number">2.</span> <span class="toc-text"> B. Alien Generator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#算法-暴力枚举"><span class="toc-number">2.1.</span> <span class="toc-text"> 算法 —— 暴力枚举</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#c-rock-paper-scissors"><span class="toc-number">3.</span> <span class="toc-text"> C. Rock Paper Scissors</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#算法-动态规划"><span class="toc-number">3.1.</span> <span class="toc-text"> 算法 —— 动态规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-代码-2"><span class="toc-number">3.2.</span> <span class="toc-text"> C++ 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#d-binary-operator"><span class="toc-number">4.</span> <span class="toc-text"> D. Binary Operator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#算法-哈希表达式求值"><span class="toc-number">4.1.</span> <span class="toc-text"> 算法 —— 哈希+表达式求值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-代码-3"><span class="toc-number">4.2.</span> <span class="toc-text"> C++ 代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开源代码"><span class="toc-number">5.</span> <span class="toc-text"> 开源代码</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/doraemon.jpeg"></div><div class="author-info__name text-center">upupming</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">52</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">44</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">27</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接</div><a class="author-info-links__name text-center" href="https://molunerfinn.com/">MARKSZのBlog</a><a class="author-info-links__name text-center" href="https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/master/README-zh_CN.md">提问的智慧</a><a class="author-info-links__name text-center" href="https://zh.wikipedia.org/">中文维基百科</a><a class="author-info-links__name text-center" href="https://zbqtesla.github.io">ZBQTesla的博客</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/background.png)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">upupming 的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="https://mirror.upupming.site">Mirror</a><a class="site-page" href="https://music.wxhbts.com">音乐</a><a class="site-page" href="https://writing.upupming.site">Writing</a><a class="site-page" href="/about">关于</a><a class="site-page" href="/rss">RSS</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">Google Kickstart 2021 Round C 题解</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-06-05</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/算法/">算法</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/算法/Kick-Start/">Kick Start</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.8k</span><span class="post-meta__separator">|</span><span>阅读时长: 13 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>这次考试的知识点恰好是不是很熟的，还需要加强。算法分别是数位 DP、暴力枚举、动态规划和表达式求值。</p>
<a id="more"></a>
<h2 id="a-smaller-strings"><a class="markdownIt-Anchor" href="#a-smaller-strings"></a> A. Smaller Strings</h2>
<h3 id="算法-按位枚举"><a class="markdownIt-Anchor" href="#算法-按位枚举"></a> 算法 —— 按位枚举</h3>
<ul>
<li>
<p>类似数位 DP，枚举每一位的填法即可，用 <code>f[len]</code> 表示长为 <code>len</code> 的所有回文串（不必满足题目的小于条件）有多少，先预处理一遍。</p>
</li>
<li>
<p>ok 表示第 <code>dep</code> 位可以填 <code>s[dep]</code> 而仍然保证小于关系（由于 <code>1~dep-1</code>位都已经确定，后半段回文也确定了，就算第 <code>dep</code> 位填 <code>s[dep]</code> 也可能可以保证小于关系）</p>
</li>
<li>
<p>边界情况需要格外注意，下面这个特殊例子，填 <code>baa</code> 之后，最后一位是可以填 <code>a</code> 的，因为 <code>reverse(baa)=aab &lt; abd</code>，注意 <code>a</code>  相同所以延续到 <code>a&lt;b</code> 来做比较，实际实现时通过 <code>ok</code> 的传递来实现</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">7 5</span><br><span class="line">baaaabd</span><br></pre></td></tr></table></figure>
<ul>
<li>比赛的时候想到了比较 <code>s[i]</code> 与 <code>s[n-1-i]</code>，但是没想到相同的时候需要延续到 <code>s[i-1]</code> 与 <code>s[n-i]</code>，构造很多测试用例也没构造到上面这个例子，所以就一直 WA</li>
</ul>
</li>
<li>
<p>时间复杂度:</p>
<ul>
<li>预处理 <code>f</code>: <code>O(N)</code></li>
<li>枚举填充所有的位: <code>O(N)</code></li>
<li>总时间复杂度度：<code>O(N)</code></li>
</ul>
</li>
</ul>
<h3 id="c-代码"><a class="markdownIt-Anchor" href="#c-代码"></a> C++ 代码</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> P = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line">LL n, k, f[N];</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prework</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (LL i = <span class="number">1</span>; i &lt;= n; i += <span class="number">2</span>) &#123;</span><br><span class="line">        f[i] = f[i + <span class="number">1</span>] = f[i - <span class="number">1</span>] * k % P;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ok 表示第 dep 位可以填 s[dep] 而仍然保证小于关系（由后半段回文保证了）</span></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">bool</span> ok)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> newOk = (s[dep] &lt; s[n - <span class="number">1</span> - dep] || (s[dep] == s[n - <span class="number">1</span> - dep] &amp;&amp; ok));</span><br><span class="line">    <span class="keyword">if</span> (dep == (n - <span class="number">1</span>) / <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s[dep] - <span class="string">'a'</span> + newOk;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 边界情况，奇数长回文只能用上一位的 ok</span></span><br><span class="line">            <span class="keyword">return</span> s[dep] - <span class="string">'a'</span> + ok;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    LL ans = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 填 a~s[dep]-1</span></span><br><span class="line">    <span class="keyword">if</span> (n - <span class="number">2</span> * (dep + <span class="number">1</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        ans += (s[dep] - <span class="string">'a'</span>) * f[n - <span class="number">2</span> * (dep + <span class="number">1</span>)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 填 s[dep]</span></span><br><span class="line">    ans += dfs(dep + <span class="number">1</span>, newOk);</span><br><span class="line">    <span class="keyword">return</span> ans % P;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    prework();</span><br><span class="line">    <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k &gt;&gt; s;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, i, solve());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="b-alien-generator"><a class="markdownIt-Anchor" href="#b-alien-generator"></a> B. Alien Generator</h2>
<h3 id="算法-暴力枚举"><a class="markdownIt-Anchor" href="#算法-暴力枚举"></a> 算法 —— 暴力枚举</h3>
<ul>
<li>推公式可得: <code>k = (2g-i^2+i)/(2i)</code>，因此 <code>2g-i^2+i&gt;0</code>，二次函数不等式解一下得到 <code>i</code> 的范围是 <code>[1-sqrt(1-8g)]/2</code> 到 <code>[1+sqrt(1-8g)]/2</code>，这个范围是 <code>sqrt(g)</code> 大小的，直接暴力枚举所有 <code>i</code> 判断求出的 <code>k</code> 是不是整数即可。</li>
<li>时间复杂度 <code>O(sqrt(G))</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line">LL g;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    LL ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> delta = <span class="built_in">sqrt</span>(<span class="number">1</span> + <span class="number">8</span> * g);</span><br><span class="line">    LL start = <span class="built_in">floor</span>((<span class="number">1</span> - delta) / <span class="number">2</span>), end = <span class="built_in">ceil</span>((<span class="number">1</span> + delta) / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x = max(start, <span class="number">1l</span>l); x &lt;= end; x++) &#123;</span><br><span class="line">        <span class="keyword">auto</span> above = (<span class="number">2</span> * g - x * x + x), under = (<span class="number">2</span> * x);</span><br><span class="line">        <span class="keyword">if</span> (above % under == <span class="number">0</span> &amp;&amp; above / under &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ans++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; g;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>, i, solve());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="c-rock-paper-scissors"><a class="markdownIt-Anchor" href="#c-rock-paper-scissors"></a> C. Rock Paper Scissors</h2>
<h3 id="算法-动态规划"><a class="markdownIt-Anchor" href="#算法-动态规划"></a> 算法 —— 动态规划</h3>
<ul>
<li>题目说了一定有方案能够使答案大于等于 X (It is guaranteed that for given X a solution exists.)</li>
<li>可以直接 dp，求一下每天的 60 轮里面最高得分的方案即可，肯定就是答案，都不用验证是否 &gt;= X（因为题目说了一定有解，最大的值肯定是满足 &gt;= X 的）</li>
<li><code>dp[i][r][s][p]</code>:
<ul>
<li>状态表示: 前 <code>1~i</code> 轮，我方有 <code>r</code> 轮出出 Rock，有 <code>s</code> 轮出 Scissors，有 <code>p</code> 轮出 Paper 的状态，最后一维 <code>p=i-r-s</code> 可以消去</li>
<li>属性：最大平均得分</li>
<li>状态计算: 根据当前的 <code>i, r, s, p</code>，可以推得对手出各种牌的概率，从而知道自己选各种方案的平均得分，从而进行转移（具体见代码注释）</li>
<li>注意：一般来说 dp 可以枚举每一个状态可以由哪些状态转移过来，也可以枚举一个状态可以转移到哪些状态，在这个题目上，后者显然更加方便实现</li>
</ul>
</li>
<li>记录下状态转移的路径，<code>ch[i][r][s]</code> 表示状态下最后一个方案是什么，可以由此反推上个状态直到初始态，最后输出方案即可</li>
<li>时间复杂度:
<ul>
<li>枚举所有状态: <code>O(60^3)</code>
<ul>
<li>状态转移: <code>O(1)</code></li>
</ul>
</li>
<li>总时间复杂度: <code>O(60^3)</code></li>
</ul>
</li>
</ul>
<h3 id="c-代码-2"><a class="markdownIt-Anchor" href="#c-代码-2"></a> C++ 代码</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, x;</span><br><span class="line"><span class="keyword">double</span> w, e;</span><br><span class="line"><span class="keyword">char</span> ch[N][N][N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// dp[i][r][s], p=i-r-s</span></span><br><span class="line">    <span class="keyword">double</span> dp[N][N][N] = &#123;<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="comment">// 第 1 轮出 r/s/p，平均得分都是 (w+e+0)/3</span></span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] = dp[<span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>] = dp[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>] = (w + e) / <span class="number">3</span>;</span><br><span class="line">    ch[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] = <span class="string">'r'</span>, ch[<span class="number">1</span>][<span class="number">0</span>][<span class="number">1</span>] = <span class="string">'s'</span>, ch[<span class="number">1</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="string">'p'</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt;= i; r++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s + r &lt;= i; s++) &#123;</span><br><span class="line">                <span class="keyword">int</span> p = i - r - s;</span><br><span class="line">                <span class="comment">// 下一轮对手出 3 种牌的概率</span></span><br><span class="line">                <span class="keyword">double</span> pP = (<span class="keyword">double</span>)r / i, pR = (<span class="keyword">double</span>)s / i, pS = (<span class="keyword">double</span>)p / i;</span><br><span class="line">                <span class="comment">// 下一轮我们分别出 r, s, p 的得分</span></span><br><span class="line">                <span class="keyword">double</span> rScore = pS * w + pR * e, sScore = pP * w + pS * e, pScore = pR * w + pP * e;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (dp[i + <span class="number">1</span>][r + <span class="number">1</span>][s] &lt; dp[i][r][s] + rScore) &#123;</span><br><span class="line">                    ch[i + <span class="number">1</span>][r + <span class="number">1</span>][s] = <span class="string">'r'</span>;</span><br><span class="line">                    dp[i + <span class="number">1</span>][r + <span class="number">1</span>][s] = dp[i][r][s] + rScore;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (dp[i + <span class="number">1</span>][r][s + <span class="number">1</span>] &lt; dp[i][r][s] + sScore) &#123;</span><br><span class="line">                    ch[i + <span class="number">1</span>][r][s + <span class="number">1</span>] = <span class="string">'s'</span>;</span><br><span class="line">                    dp[i + <span class="number">1</span>][r][s + <span class="number">1</span>] = dp[i][r][s] + sScore;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (dp[i + <span class="number">1</span>][r][s] &lt; dp[i][r][s] + pScore) &#123;</span><br><span class="line">                    ch[i + <span class="number">1</span>][r][s] = <span class="string">'p'</span>;</span><br><span class="line">                    dp[i + <span class="number">1</span>][r][s] = dp[i][r][s] + pScore;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ci = <span class="number">60</span>, cr, cs;</span><br><span class="line">    <span class="keyword">double</span> best = <span class="number">-1</span>;</span><br><span class="line">    <span class="comment">// 求 i==60 时的最大</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> r = <span class="number">0</span>; r &lt;= <span class="number">60</span>; r++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; r + s &lt;= <span class="number">60</span>; s++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dp[<span class="number">60</span>][r][s] &gt; best) &#123;</span><br><span class="line">                cr = r, cs = s;</span><br><span class="line">                best = dp[<span class="number">60</span>][r][s];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">string</span> ans;</span><br><span class="line">    <span class="keyword">while</span> (ci &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (ch[ci][cr][cs]) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'r'</span>:</span><br><span class="line">                ans += <span class="string">'R'</span>;</span><br><span class="line">                cr--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'s'</span>:</span><br><span class="line">                ans += <span class="string">'S'</span>;</span><br><span class="line">                cs--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'p'</span>:</span><br><span class="line">                ans += <span class="string">'P'</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ci--;</span><br><span class="line">    &#125;</span><br><span class="line">    reverse(ans.begin(), ans.end());</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t &gt;&gt; x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; w &gt;&gt; e;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, i);</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="d-binary-operator"><a class="markdownIt-Anchor" href="#d-binary-operator"></a> D. Binary Operator</h2>
<h3 id="算法-哈希表达式求值"><a class="markdownIt-Anchor" href="#算法-哈希表达式求值"></a> 算法 —— 哈希+表达式求值</h3>
<ul>
<li>想到的是类似字符串哈希的算法，随机生成一些函数，通过多次随机检测，如果结果都相同，则认为是一类，试了一下果然过了</li>
<li>一开始认为每两对之间都是相等的，做 10 次测试（当然次数越多越好了，但是 10 次理论上就基本上不会出问题了），每次测试生成不同的 total function（就是将输入 x, y 映射成一个输出 z），在同一次测试中 total function 需要保持一致，不同测试中的 total function 则需要进行改变</li>
<li>剩下的就是表达式求值的模板，直接 copy 一下蓝书上<a href="https://github.com/upupming/algorithm/tree/master/acwing/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E8%BF%9B%E9%98%B6%E6%8C%87%E5%8D%97/0x18-%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%83%E4%B9%A0/151.%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AE%A1%E7%AE%974.cpp" target="_blank" rel="noopener">「表达式计算4」的源代码</a>即可，这题还做了简化，没有负数，一个括号内也只会有一个运算符（即题目的 fully parenthesized 条件，因此可以省去优先级的判断）。</li>
<li>另外，需要牢固掌握高精度模板，这题用到了<a href="https://github.com/upupming/algorithm/tree/master/acwing/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E8%AE%B2%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E9%AB%98%E7%B2%BE%E5%BA%A6/791.%20%E9%AB%98%E7%B2%BE%E5%BA%A6%E5%8A%A0%E6%B3%95.cpp" target="_blank" rel="noopener">高精度加高精度</a>、<a href="https://github.com/upupming/algorithm/tree/master/acwing/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E8%AE%B2%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E9%AB%98%E7%B2%BE%E5%BA%A6/793.%20%E9%AB%98%E7%B2%BE%E5%BA%A6%E4%B9%98%E6%B3%95-%E9%AB%98%E7%B2%BE%E5%BA%A6%E4%B9%98%E4%BB%A5%E9%AB%98%E7%B2%BE%E5%BA%A6.cpp" target="_blank" rel="noopener">高精度乘高精度</a>。</li>
<li>时间复杂度：
<ul>
<li>枚举 10 次 <code>(10)</code>
<ul>
<li>枚举所有表达式 <code>O(N)</code>
<ul>
<li>表达式求值 <code>O(N)</code></li>
<li>比较前面的所有表达式 <code>O(N)</code></li>
</ul>
</li>
<li>两两比较 <code>O(N)</code> 构造分组答案</li>
</ul>
</li>
<li>总时间复杂度 <code>O(10N^2)</code></li>
</ul>
</li>
</ul>
<h3 id="c-代码-3"><a class="markdownIt-Anchor" href="#c-代码-3"></a> C++ 代码</h3>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, idx[N];</span><br><span class="line"><span class="built_in">string</span> e[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; val[N];</span><br><span class="line"><span class="keyword">bool</span> same[N][N];</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&gt; h;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">long</span> <span class="keyword">long</span>)rand() * rand() % n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">toString</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> ans;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : A) ans += to_string(x);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;B)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (A.size() != B.size()) &#123;</span><br><span class="line">        <span class="keyword">return</span> A.size() &lt; B.size();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = A.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (A[i] != B[i]) <span class="keyword">return</span> A[i] &lt; B[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = A.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; A[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">add</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;B)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (A.size() &lt; B.size()) <span class="keyword">return</span> add(B, A);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; C;</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i++) &#123;</span><br><span class="line">        t += A[i];</span><br><span class="line">        <span class="keyword">if</span> (i &lt; B.size()) t += B[i];</span><br><span class="line">        C.push_back(t % <span class="number">10</span>);</span><br><span class="line">        t /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (t) C.push_back(t);</span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">mul</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;B)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">C</span><span class="params">(A.size() + B.size())</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; A.size(); i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; B.size(); j++) &#123;</span><br><span class="line">            C[i + j] += A[i] * B[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; C.size(); i++) &#123;</span><br><span class="line">        t += C[i];</span><br><span class="line">        C[i] = t % <span class="number">10</span>;</span><br><span class="line">        t /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (C.size() &gt; <span class="number">1</span> &amp;&amp; C.back() == <span class="number">0</span>) C.pop_back();</span><br><span class="line">    <span class="keyword">return</span> C;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">calc_hash</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;A, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;B)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">auto</span> a = toString(A), b = toString(B);</span><br><span class="line">    <span class="keyword">if</span> (h.count(a) &amp;&amp; h[a].count(b)) <span class="keyword">return</span> h[a][b];</span><br><span class="line">    <span class="keyword">int</span> c = random(INT_MAX);</span><br><span class="line">    <span class="keyword">while</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        ans.push_back(c % <span class="number">10</span>);</span><br><span class="line">        c /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> h[a][b] = ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">calc_exp</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; nums;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; ops;</span><br><span class="line">    <span class="built_in">string</span> s = e[i];</span><br><span class="line">    <span class="keyword">int</span> n = s.length();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; val;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &gt;= <span class="string">'0'</span> &amp;&amp; s[i] &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">            val.push_back(s[i] - <span class="string">'0'</span>);</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; n &amp;&amp; s[i + <span class="number">1</span>] &gt;= <span class="string">'0'</span> &amp;&amp; s[i + <span class="number">1</span>] &lt;= <span class="string">'9'</span>) <span class="keyword">continue</span>;</span><br><span class="line">            reverse(val.begin(), val.end());</span><br><span class="line">            nums.push_back(val);</span><br><span class="line">            val.resize(<span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">            ops.push_back(<span class="string">'('</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (ops.size() &amp;&amp; ops.back() != <span class="string">'('</span>) &#123;</span><br><span class="line">                <span class="comment">// 出栈一个符号就计算一下</span></span><br><span class="line">                <span class="keyword">char</span> op = ops.back();</span><br><span class="line">                ops.pop_back();</span><br><span class="line">                <span class="comment">// 计算逻辑</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">auto</span> y = nums.back();</span><br><span class="line">                    nums.pop_back();</span><br><span class="line">                    <span class="keyword">auto</span> x = nums.back();</span><br><span class="line">                    nums.pop_back();</span><br><span class="line">                    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; z;</span><br><span class="line">                    <span class="keyword">switch</span> (op) &#123;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">                            z = add(x, y);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'*'</span>:</span><br><span class="line">                            z = mul(x, y);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">case</span> <span class="string">'#'</span>:</span><br><span class="line">                            z = calc_hash(x, y);</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 把运算结果放回栈中</span></span><br><span class="line">                    nums.push_back(z);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 左括号出栈（如果有的话）</span></span><br><span class="line">            <span class="keyword">if</span> (ops.size()) ops.pop_back();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 运算符，直接入栈，这题简化了，括号内最多只有一个运算符</span></span><br><span class="line">            ops.push_back(s[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums.front();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 开始认为两两之间都相等，需要经受 10 次考验，受不住的就设置为不相等</span></span><br><span class="line">    <span class="built_in">memset</span>(same, <span class="number">1</span>, <span class="keyword">sizeof</span> same);</span><br><span class="line">    <span class="comment">// 随机生成 10 次 total function 进行消除</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">10</span>; k++) &#123;</span><br><span class="line">        h.clear();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            val[i] = calc_exp(i);</span><br><span class="line">            <span class="comment">// cout &lt;&lt; i &lt;&lt; " ";</span></span><br><span class="line">            <span class="comment">// out(val[i]);</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++) &#123;</span><br><span class="line">                <span class="comment">// val[i] != val[j]</span></span><br><span class="line">                <span class="keyword">if</span> (cmp(val[i], val[j]) || cmp(val[j], val[i])) &#123;</span><br><span class="line">                    same[i][j] = same[j][i] = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">bool</span> found = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (same[j][i]) &#123;</span><br><span class="line">                found = <span class="literal">true</span>, idx[i] = idx[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!found) &#123;</span><br><span class="line">            idx[i] = p++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; idx[i] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; e[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>, i);</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="开源代码"><a class="markdownIt-Anchor" href="#开源代码"></a> 开源代码</h2>
<p>代码已经放在 GitHub: <a href="https://github.com/upupming/algorithm/tree/master/kick-start/2021/RoundC" target="_blank" rel="noopener">https://github.com/upupming/algorithm/tree/master/kick-start/2021/RoundC</a> ，大家多多 clone，也可以随手 star 一下~</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">upupming</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://upupming.site/2021/06/05/kick-start-2021-round-c/">https://upupming.site/2021/06/05/kick-start-2021-round-c/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://upupming.site">upupming 的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/algorithm/">algorithm</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/08/29/vue-release/"><i class="fa fa-chevron-left">  </i><span>Vue 3 发版流程源码分析</span></a></div><div class="next-post pull-right"><a href="/2021/05/11/kick-start-2021-round-b/"><span>Google Kickstart 2021 Round B 题解</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="vcomment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = 'true' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'wiHsGgANF4mLmK2Hiubzew03-gzGzoHsz',
  appKey:'Tk0WjoOhLD8ppTfyhdCbyeDT',
  placeholder:'Just go go',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-cn'
})</script></div></div><footer class="footer-bg" style="background-image: url(/img/background.png)"><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2024 By upupming</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/algolia.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>